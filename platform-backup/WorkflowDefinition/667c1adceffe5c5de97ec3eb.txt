{
	"appsUsed":[
		"code_by_unifyapps",
		"custom_http_endpoint",
		"openai"
	],
	"createdTime":1719409372229,
	"deleted":true,
	"description":"",
	"edges":[
		{
			"fromNodeId":"V1ELh",
			"priority":0,
			"skip":false,
			"toNodeId":"a9UI0",
			"type":"next"
		},
		{
			"fromNodeId":"a9UI0",
			"priority":0,
			"skip":false,
			"toNodeId":"qqdop",
			"type":"next"
		},
		{
			"fromNodeId":"qqdop",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"TJDN5",
			"type":"if"
		},
		{
			"fromNodeId":"TJDN5",
			"priority":0,
			"skip":false,
			"toNodeId":"3B9ch",
			"type":"next"
		},
		{
			"fromNodeId":"qqdop",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"K1y9t",
			"type":"next"
		},
		{
			"fromNodeId":"K1y9t",
			"priority":0,
			"skip":false,
			"toNodeId":"PBvPD",
			"type":"next"
		},
		{
			"fromNodeId":"3B9ch",
			"priority":0,
			"skip":false,
			"toNodeId":"5BNY9",
			"type":"next"
		},
		{
			"fromNodeId":"PBvPD",
			"priority":0,
			"skip":false,
			"toNodeId":"5BNY9",
			"type":"next"
		},
		{
			"fromNodeId":"5BNY9",
			"priority":0,
			"skip":false,
			"toNodeId":"z5gB2",
			"type":"next"
		},
		{
			"fromNodeId":"z5gB2",
			"priority":0,
			"skip":false,
			"toNodeId":"VtZRA",
			"type":"next"
		},
		{
			"fromNodeId":"VtZRA",
			"priority":0,
			"skip":false,
			"toNodeId":"FVf9h",
			"type":"next"
		},
		{
			"fromNodeId":"FVf9h",
			"priority":0,
			"skip":false,
			"toNodeId":"4XC3c",
			"type":"loop"
		},
		{
			"fromNodeId":"4XC3c",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"ftthX",
			"type":"if"
		},
		{
			"fromNodeId":"ftthX",
			"priority":0,
			"skip":false,
			"toNodeId":"y6fO2",
			"type":"next"
		},
		{
			"fromNodeId":"4XC3c",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"y6fO2",
			"type":"next"
		},
		{
			"fromNodeId":"y6fO2",
			"name":"loopback",
			"priority":0,
			"skip":false,
			"toNodeId":"FVf9h",
			"type":"next"
		},
		{
			"fromNodeId":"FVf9h",
			"priority":0,
			"skip":false,
			"toNodeId":"PUHmn",
			"type":"next"
		},
		{
			"fromNodeId":"PUHmn",
			"priority":0,
			"skip":false,
			"toNodeId":"bX1eU",
			"type":"next"
		},
		{
			"fromNodeId":"bX1eU",
			"priority":0,
			"skip":false,
			"toNodeId":"mKOep",
			"type":"next"
		},
		{
			"fromNodeId":"mKOep",
			"name":"yes",
			"priority":0,
			"skip":false,
			"toNodeId":"pU8Fx",
			"type":"if"
		},
		{
			"fromNodeId":"pU8Fx",
			"priority":0,
			"skip":false,
			"toNodeId":"pJiQe",
			"type":"next"
		},
		{
			"fromNodeId":"pJiQe",
			"priority":0,
			"skip":false,
			"toNodeId":"v1mb7",
			"type":"next"
		},
		{
			"fromNodeId":"mKOep",
			"name":"no",
			"priority":0,
			"skip":false,
			"toNodeId":"DZdHn",
			"type":"next"
		},
		{
			"fromNodeId":"DZdHn",
			"priority":0,
			"skip":false,
			"toNodeId":"H7VF4",
			"type":"next"
		},
		{
			"fromNodeId":"H7VF4",
			"priority":0,
			"skip":false,
			"toNodeId":"AMyqY",
			"type":"next"
		},
		{
			"fromNodeId":"AMyqY",
			"priority":0,
			"skip":false,
			"toNodeId":"u7oxo",
			"type":"next"
		},
		{
			"fromNodeId":"u7oxo",
			"priority":0,
			"skip":false,
			"toNodeId":"22Ryd",
			"type":"next"
		},
		{
			"fromNodeId":"v1mb7",
			"priority":0,
			"skip":false,
			"toNodeId":"kgxI0",
			"type":"next"
		},
		{
			"fromNodeId":"22Ryd",
			"priority":0,
			"skip":false,
			"toNodeId":"kgxI0",
			"type":"next"
		},
		{
			"fromNodeId":"kgxI0",
			"priority":0,
			"skip":false,
			"toNodeId":"0osUV",
			"type":"next"
		}
	],
	"id":"667c1adceffe5c5de97ec3eb",
	"lastModifiedBy":311,
	"lcName":"lovekesh automation details flow control prompt",
	"modifiedTime":1719411613628,
	"name":"Lovekesh Automation Details Flow control prompt",
	"nodes":[
		{
			"context":{
				"appName":"callables",
				"resourceVersion":34,
				"resourceName":"callables_from_automation"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"V1ELh",
			"index":0,
			"inputs":{
				"result":{
					"type":"object",
					"properties":{
						"START":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"START"
						},
						"CANCEL":{
							"type":"string",
							"title":"CANCEL"
						}
					},
					"required":[]
				},
				"triggerInputCondition":{
					"filters":[
						{
							"property":"",
							"filter":{
								"operator":"EQUAL",
								"value":""
							}
						}
					],
					"operator":"AND"
				},
				"setup":{
					"type":"object",
					"properties":{
						"userMessage":{
							"type":"string",
							"title":"User Message"
						},
						"currentBotAutomation":{
							"type":"string",
							"title":"Current Bot Automation"
						},
						"conversationHistory":{
							"type":"string",
							"title":"Conversation History"
						},
						"currentChannel":{
							"type":"string",
							"title":"Current Channel"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"title":"Trigger from automation",
			"trigger":{
				"type":"CALLABLE"
			},
			"type":"START"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":103,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"a9UI0",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"List items",
							"ui:description":"Set the initial values in the list, defaults to empty"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{
										"id":{
											"type":"string",
											"title":"Id"
										},
										"name":{
											"type":"string",
											"title":"Name"
										},
										"description":{
											"type":"string",
											"title":"Description"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"Fetched Automations",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"type":"SCHEMA",
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"Fetched Automations",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"id":{
										"type":"string",
										"title":"Id"
									},
									"name":{
										"type":"string",
										"title":"Name"
									},
									"description":{
										"type":"string",
										"title":"Description"
									}
								}
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":32,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"qqdop",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"true",
						"filter":{
							"operator":"EQUAL",
							"value":"true"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"standard_entities",
				"resourceVersion":0,
				"resourceName":"standard_entities_get_automation_details",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"qqdop@V1ELh-1@y",
			"id":"TJDN5",
			"index":0,
			"inputs":{
				"workflowIds":[
					"665879054d000e5da1ca0e78",
					"665d79bf68ba9168597aa42a",
					"66557ac072642114cb34292d",
					"665d904b68ba9168597aafb2",
					"665d7cd068ba9168597aa4b5",
					"665d99e368ba9168597ab337",
					"665da332456c1d45bdf324ac",
					"665dd23fd07c2856c149ee2a",
					"665e124c191bf92c80f9b400",
					"66627ecc86bec812bd4e29b5"
				]
			},
			"skip":false,
			"subTitle":"Standard entities by UnifyApps",
			"title":"Get automation details",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":48,
				"resourceName":"variable_by_unifyapps_add_items_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"qqdop@V1ELh-1@y",
			"id":"3B9ch",
			"index":0,
			"inputs":{
				"insertLocation":"END",
				"itemsToAdd":{
					"ua:type":"mappedArray",
					"source":"{{ TJDN5.outputs.automationDetails }}",
					"items":{
						"id":"{{ TJDN5.outputs.automationDetails[0].id }}",
						"name":"{{ TJDN5.outputs.automationDetails[0].name }}",
						"description":"{{ TJDN5.outputs.automationDetails[0].description }}"
					}
				},
				"listName":"{{ a9UI0.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add items to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"standard_entities",
				"resourceVersion":0,
				"resourceName":"standard_entities_get_automation_details",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"qqdop@V1ELh-1@n",
			"id":"K1y9t",
			"index":0,
			"inputs":{
				"workflowIds":""
			},
			"skip":false,
			"subTitle":"Standard entities by UnifyApps",
			"title":"Get automation details",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":48,
				"resourceName":"variable_by_unifyapps_add_items_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"qqdop@V1ELh-1@n",
			"id":"PBvPD",
			"index":0,
			"inputs":{
				"insertLocation":"END",
				"itemsToAdd":{
					"ua:type":"mappedArray",
					"source":"{{ K1y9t.outputs.automationDetails }}",
					"items":{
						"id":"{{ K1y9t.outputs.automationDetails[0].id }}",
						"name":"{{ K1y9t.outputs.automationDetails[0].name }}",
						"description":"{{ K1y9t.outputs.automationDetails[0].description }}"
					}
				},
				"listName":"{{ a9UI0.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add items to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":43,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"5BNY9",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"updatedAutomationDetails":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"name":{
										"type":"string",
										"title":"name"
									},
									"description":{
										"type":"string",
										"title":"description"
									},
									"id":{
										"type":"string",
										"title":"id"
									},
									"automationId":{
										"type":"string",
										"title":"Automation Id"
									}
								}
							},
							"title":"updatedAutomationDetails",
							"required":[]
						}
					},
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"automationDetails":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"name":{
										"type":"string",
										"title":"name"
									},
									"description":{
										"type":"string",
										"title":"description"
									},
									"id":{
										"type":"string",
										"title":"id"
									}
								}
							},
							"title":"automationDetails"
						}
					},
					"required":[]
				},
				"code":"\n// generate human readable automation id using automation name\ndef updatedAutomationDetails = []\nautomationDetails.each { automationDetail ->\n    updatedAutomationDetails.add([\n        'id': automationDetail['name'].replaceAll(\"[\\n\\r]\", \"\").tokenize(']').last().toLowerCase().trim().replace(\" \",\"_\").replaceAll(\"_bot_v2_\", \"\"), \n        'automationId': automationDetail['id'],\n        'name': automationDetail['name'],\n        'description': automationDetail['description']]); \n}\n\nreturn ['updatedAutomationDetails' : updatedAutomationDetails]\n",
				"parameters":{
					"automationDetails":{
						"source":"{{ a9UI0.outputs.items }}",
						"ua:type":"mappedArray",
						"items":{
							"name":"{{ a9UI0.outputs.items[0].name }}",
							"description":"{{ a9UI0.outputs.items[0].description }}",
							"id":"{{ a9UI0.outputs.items[0].id }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Code By UnifyApps",
			"title":"Execute groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":103,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"z5gB2",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"List items",
							"ui:description":"Set the initial values in the list, defaults to empty"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"type":"object",
									"properties":{
										"flow_id":{
											"type":"string",
											"title":"flow_id"
										},
										"flow_description":{
											"type":"string",
											"title":"flow_description"
										},
										"flow_name":{
											"type":"string",
											"title":"flow_name"
										}
									}
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"Available Flows",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"type":"SCHEMA",
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"Available Flows",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"flow_id":{
										"type":"string",
										"title":"flow_id"
									},
									"flow_description":{
										"type":"string",
										"title":"flow_description"
									},
									"flow_name":{
										"type":"string",
										"title":"flow_name"
									}
								}
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":101,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"VtZRA",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"ui:submitButtonOptions":{
						"norender":true
					}
				},
				"schema":{
					"type":"object",
					"properties":{
						"currentFlowId":{
							"type":"string",
							"title":"Current Flow Id"
						},
						"currentFlowName":{
							"type":"string",
							"title":"Current Flow Name"
						},
						"currentFlowDescription":{
							"type":"string",
							"title":"Current Flow Description"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"type":"SCHEMA",
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"currentFlowId":{
							"type":"string",
							"title":"Current Flow Id"
						},
						"currentFlowName":{
							"type":"string",
							"title":"Current Flow Name"
						},
						"currentFlowDescription":{
							"type":"string",
							"title":"Current Flow Description"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"loop",
				"resourceVersion":74,
				"resourceName":"loop_for_each",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"FVf9h",
			"index":0,
			"inputs":{
				"repeatMode":"SINGLE",
				"listSource":"{{ 5BNY9.outputs.result.updatedAutomationDetails }}"
			},
			"skip":false,
			"subTitle":"Loop",
			"title":"For each item in the list",
			"type":"LOOP"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":32,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"FVf9h@V1ELh-1@l",
			"id":"4XC3c",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"{{ FVf9h.outputs.item.automationId }}",
						"filter":{
							"operator":"EQUAL",
							"value":"{{ V1ELh.outputs.currentBotAutomation }}"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":43,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"4XC3c@FVf9h@V1ELh-1@l@y",
			"id":"ftthX",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ VtZRA.outputs.currentFlowId }}",
						"value":"flow_{{ FVf9h.outputs.item.id }}"
					},
					{
						"source":"{{ VtZRA.outputs.currentFlowName }}",
						"value":"{{ FVf9h.outputs.item.name }}"
					},
					{
						"source":"{{ VtZRA.outputs.currentFlowDescription }}",
						"value":"{{ FVf9h.outputs.item.description }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":50,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"FVf9h@V1ELh-1@l",
			"id":"y6fO2",
			"index":0,
			"inputs":{
				"itemToAdd":{
					"flow_id":"flow_{{ FVf9h.outputs.item.id }}",
					"flow_description":"{{ FVf9h.outputs.item.description }}",
					"flow_name":"{{ FVf9h.outputs.item.name }}"
				},
				"insertLocation":"END",
				"listName":"{{ z5gB2.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add an item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":40,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"PUHmn",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"conversationHistory":{
							"type":"string",
							"title":"Conversation History"
						}
					},
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"conversationHistory":{
							"type":"string",
							"title":"Conversation History"
						},
						"availableFlows":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"flow_id":{
										"type":"string",
										"title":"Flow Id"
									}
								}
							},
							"title":"Available Flows",
							"required":[]
						}
					},
					"required":[]
				},
				"code":"if(!conversationHistory){\n    return conversationHistory;\n}\navailableFlows.eachWithIndex { flow, index ->\n    conversationHistory = conversationHistory.replaceAll(flow['flow_id'], index.toString());\n}\nreturn ['conversationHistory' : conversationHistory];",
				"parameters":{
					"conversationHistory":"{{ V1ELh.outputs.conversationHistory }}",
					"availableFlows":{
						"ua:type":"mappedArray",
						"source":"{{ a9UI0.outputs.items }}",
						"items":{
							"flow_id":"{{ a9UI0.outputs.items[0].id }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Code By UnifyApps",
			"title":"Execute groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":105,
				"resourceName":"variable_by_unifyapps_create_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"bX1eU",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"ui:submitButtonOptions":{
						"norender":true
					}
				},
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"content":{
							"type":"string",
							"title":"Content"
						}
					},
					"required":[]
				}
			},
			"inputs":{},
			"outputSchema":{
				"type":"SCHEMA",
				"dynamic":false,
				"schema":{
					"additionalProperties":false,
					"type":"object",
					"properties":{
						"content":{
							"type":"string",
							"title":"Content"
						}
					},
					"required":[]
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"if_else",
				"resourceVersion":35,
				"resourceName":"if_else_condition",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"mKOep",
			"index":0,
			"inputs":{
				"filters":[
					{
						"property":"model_openai",
						"filter":{
							"operator":"EQUAL",
							"value":"model_openai"
						}
					}
				],
				"operator":"AND"
			},
			"skip":false,
			"subTitle":"Condition",
			"title":"Condition",
			"type":"IF_ELSE"
		},
		{
			"context":{
				"appName":"template_by_unifyapps",
				"resourceVersion":68,
				"resourceName":"template_by_unifyapps_compile_template",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mKOep@V1ELh-1@y",
			"id":"pU8Fx",
			"index":0,
			"inputs":{
				"input_schema":{
					"userMessage":"{{ V1ELh.outputs.userMessage }}",
					"current_flow":{
						"name":"{{ VtZRA.outputs.currentFlowName }}",
						"id":"{{ VtZRA.outputs.currentFlowId }}",
						"description":"{{ VtZRA.outputs.currentFlowDescription }}"
					},
					"conversationHistory":"{{ PUHmn.outputs.result.conversationHistory }}",
					"available_flows":{
						"source":"{{ z5gB2.outputs.items }}",
						"ua:type":"mappedArray",
						"items":{
							"name":"{{ z5gB2.outputs.items[0].flow_name }}",
							"description":"{{ z5gB2.outputs.items[0].flow_description }}",
							"id":"{{ z5gB2.outputs.items[0].flow_id }}"
						}
					}
				},
				"template_id":"e_6654d039e3309e585e106646"
			},
			"skip":false,
			"subTitle":"Template by UnifyApps",
			"title":"Compile template",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"openai",
				"resourceVersion":44,
				"connectionId":"66601031b4b25014fecfe801",
				"resourceName":"openai_send_message",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mKOep@V1ELh-1@y",
			"id":"pJiQe",
			"index":0,
			"inputs":{
				"response_format":"json_object",
				"max_tokens":100,
				"temperature":0,
				"model":"gpt-4o",
				"message":"{{ pU8Fx.outputs.output }}"
			},
			"skip":false,
			"subTitle":"OpenAI",
			"title":"Send message to OpenAI models",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":47,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mKOep@V1ELh-1@y",
			"id":"v1mb7",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ bX1eU.outputs.content }}",
						"value":"{{ pJiQe.outputs.choices[0].message.content }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"template_by_unifyapps",
				"resourceVersion":68,
				"resourceName":"template_by_unifyapps_compile_template",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mKOep@V1ELh-1@n",
			"id":"DZdHn",
			"index":0,
			"inputs":{
				"input_schema":{
					"userMessage":"{{ V1ELh.outputs.userMessage }}",
					"current_flow":{
						"flow_id":"{{ VtZRA.outputs.currentFlowId }}",
						"flow_name":"{{ VtZRA.outputs.currentFlowName }}"
					},
					"conversationHistory":"{{ PUHmn.outputs.result.conversationHistory }}",
					"available_flows":{
						"source":"{{ z5gB2.outputs.items }}",
						"ua:type":"mappedArray",
						"items":{
							"flow_name":"{{ z5gB2.outputs.items[0].flow_name }}",
							"flow_description":"{{ z5gB2.outputs.items[0].flow_description }}",
							"flow_id":"{{ z5gB2.outputs.items[0].flow_id }}"
						}
					}
				},
				"template_id":"e_667685795951d610a827c082"
			},
			"skip":false,
			"subTitle":"Template by UnifyApps",
			"title":"Compile template",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":106,
				"resourceName":"variable_by_unifyapps_create_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mKOep@V1ELh-1@n",
			"id":"H7VF4",
			"index":0,
			"inputSchema":{
				"type":"SCHEMA_AND_LAYOUT",
				"dynamic":false,
				"layout":{
					"createList":{
						"ui:title":"",
						"ua:type":{
							"ui:widget":"hidden"
						},
						"items":{
							"ui:title":"List items",
							"ui:description":"Set the initial values in the list, defaults to empty"
						},
						"ui:order":[
							"*",
							"items"
						]
					},
					"ua:title":{
						"ui:widget":"hidden"
					},
					"ua:list_type":{
						"ui:widget":"hidden"
					}
				},
				"schema":{
					"allOf":[
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"OBJECT"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"items":{
												"type":"object",
												"properties":{}
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"STRING"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of String"
											},
											"items":{
												"type":"string"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"INTEGER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Integers"
											},
											"items":{
												"type":"integer"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"NUMBER"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Numbers"
											},
											"items":{
												"type":"number"
											}
										}
									}
								}
							}
						},
						{
							"if":{
								"properties":{
									"ua:list_type":{
										"const":"BOOLEAN"
									}
								}
							},
							"then":{
								"properties":{
									"createList":{
										"type":"object",
										"properties":{
											"source":{
												"type":"string",
												"format":"ua:source",
												"title":"List of Booleans"
											},
											"items":{
												"type":"boolean"
											}
										}
									}
								}
							}
						}
					],
					"format":"ua:list",
					"type":"object",
					"properties":{
						"ua:title":{
							"type":"string"
						},
						"ua:list_type":{
							"type":"string",
							"title":"List Type",
							"oneOf":[
								{
									"const":"OBJECT",
									"title":"Object"
								},
								{
									"const":"STRING",
									"title":"String"
								},
								{
									"const":"NUMBER",
									"title":"Number"
								},
								{
									"const":"INTEGER",
									"title":"Integer"
								},
								{
									"const":"BOOLEAN",
									"title":"Boolean"
								}
							],
							"default":"OBJECT"
						},
						"createList":{
							"type":"object",
							"properties":{
								"ua:type":{
									"type":"string",
									"default":"mappedArray"
								},
								"source":{
									"type":"string",
									"format":"ua:source",
									"title":"List Item Source"
								},
								"items":{
									"additionalProperties":false,
									"type":[
										"object",
										"string",
										"number",
										"boolean",
										"integer"
									],
									"properties":{
										"message":{
											"type":"string",
											"title":"Message"
										},
										"role":{
											"type":"string",
											"title":"Role"
										}
									},
									"required":[]
								}
							}
						}
					}
				}
			},
			"inputs":{
				"createList":{
					"ua:type":"mappedArray"
				},
				"ua:title":"messageList",
				"ua:list_type":"OBJECT"
			},
			"outputSchema":{
				"type":"SCHEMA",
				"dynamic":false,
				"schema":{
					"type":"object",
					"properties":{
						"items":{
							"type":"array",
							"title":"messageList",
							"disableActions":true,
							"items":{
								"type":"object",
								"properties":{
									"message":{
										"type":"string",
										"title":"Message"
									},
									"role":{
										"type":"string",
										"title":"Role"
									}
								}
							}
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Create list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":53,
				"resourceName":"variable_by_unifyapps_add_item_to_list",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mKOep@V1ELh-1@n",
			"id":"AMyqY",
			"index":0,
			"inputs":{
				"itemToAdd":{
					"role":"user",
					"message":"{{ DZdHn.outputs.output }}"
				},
				"insertLocation":"START",
				"listName":"{{ H7VF4.outputs.items[0] }}"
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Add an item to list",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"custom_http_endpoint",
				"resourceVersion":41,
				"resourceName":"custom_http_endpoint_execute",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mKOep@V1ELh-1@n",
			"id":"u7oxo",
			"index":0,
			"inputs":{
				"path":"v1/chat/completions",
				"responseSchema":{
					"type":"object",
					"properties":{
						"created":{
							"type":"integer",
							"title":"created"
						},
						"usage":{
							"type":"object",
							"properties":{
								"completion_tokens":{
									"type":"integer",
									"title":"completion_tokens"
								},
								"prompt_tokens":{
									"type":"integer",
									"title":"prompt_tokens"
								},
								"total_tokens":{
									"type":"integer",
									"title":"total_tokens"
								}
							},
							"title":"usage"
						},
						"id":{
							"type":"string",
							"title":"id"
						},
						"choices":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"finish_reason":{
										"type":"string",
										"title":"finish_reason"
									},
									"index":{
										"type":"integer",
										"title":"index"
									},
									"message":{
										"type":"object",
										"properties":{
											"role":{
												"type":"string",
												"title":"role"
											},
											"content":{
												"type":"string",
												"title":"content"
											}
										},
										"title":"message"
									}
								}
							},
							"title":"choices"
						},
						"system_fingerprint":{
							"type":"string",
							"title":"system_fingerprint"
						},
						"object":{
							"type":"string",
							"title":"object"
						}
					}
				},
				"baseUrl":"http://34.143.247.106:8889/",
				"bodySchema":{
					"type":"object",
					"properties":{
						"stream":{
							"type":"boolean",
							"title":"stream"
						},
						"temperature":{
							"type":"integer",
							"title":"temperature"
						},
						"messages":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"role":{
										"type":"string",
										"title":"role"
									},
									"content":{
										"type":"string",
										"title":"content"
									}
								}
							},
							"title":"messages"
						}
					}
				},
				"authType":"CUSTOM",
				"httpMethod":"POST",
				"body":{
					"stream":false,
					"temperature":0,
					"messages":{
						"source":"{{ H7VF4.outputs.items }}",
						"ua:type":"mappedArray",
						"items":{
							"role":"{{ H7VF4.outputs.items[0].role }}",
							"content":"{{ H7VF4.outputs.items[0].message }}"
						}
					}
				}
			},
			"skip":false,
			"subTitle":"Custom HTTP Endpoint",
			"title":"Execute request",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"variable_by_unifyapps",
				"resourceVersion":47,
				"resourceName":"variable_by_unifyapps_update_variables",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"mKOep@V1ELh-1@n",
			"id":"22Ryd",
			"index":0,
			"inputs":{
				"variables":[
					{
						"source":"{{ bX1eU.outputs.content }}",
						"value":"{{ u7oxo.outputs.result.choices[0].message.content }}"
					}
				]
			},
			"skip":false,
			"subTitle":"Variable by UnifyApps",
			"title":"Update variables",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"code_by_unifyapps",
				"resourceVersion":40,
				"resourceName":"code_by_unifyapps_groovy",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"kgxI0",
			"index":0,
			"inputs":{
				"output":{
					"type":"object",
					"properties":{
						"START":{
							"type":"array",
							"items":{
								"type":"string"
							},
							"title":"START"
						},
						"CANCEL":{
							"type":"boolean",
							"title":"CANCEL"
						}
					},
					"required":[]
				},
				"input":{
					"type":"object",
					"properties":{
						"llm_response_str":{
							"type":"string",
							"title":"Llm Response Str"
						},
						"availableFlows":{
							"type":"array",
							"items":{
								"type":"object",
								"properties":{
									"flow_id":{
										"type":"string",
										"title":"Flow Id"
									}
								}
							},
							"title":"Available Flows",
							"required":[]
						}
					},
					"required":[]
				},
				"code":"def result = com.unifyapps.infra.utils.JsonUtils.fromJson(llm_response_str, com.alibaba.fastjson2.JSONObject.class);\ndef resolvedStarts = []\nif (result['START']) {\n    result['START'].each { flowIndex ->\n        String indexStr = flowIndex.split('_')[-1]\n        if (indexStr.isNumber()) {\n            int index = indexStr.toInteger()\n            if (index >= 0 && index < availableFlows.size()) {\n                resolvedStarts.add(availableFlows[index].flow_id)\n            }\n        }\n    }\n}\nresult['START'] = resolvedStarts;\nif(result['CANCEL'] != null) {\n    result['CANCEL'] = result['CANCEL'].toString();\n}\nreturn result;",
				"parameters":{
					"availableFlows":{
						"ua:type":"mappedArray",
						"source":"{{ a9UI0.outputs.items }}",
						"items":{
							"flow_id":"{{ a9UI0.outputs.items[0].id }}"
						}
					},
					"llm_response_str":"{{ bX1eU.outputs.content }}"
				}
			},
			"skip":false,
			"subTitle":"Code By UnifyApps",
			"title":"Execute groovy code",
			"type":"ACTION"
		},
		{
			"context":{
				"appName":"callables",
				"resourceVersion":30,
				"resourceName":"callables_return_to_automation",
				"type":"APPLICATION"
			},
			"debug":false,
			"dirty":false,
			"fallbackMode":"STOP",
			"groupId":"V1ELh-1",
			"id":"0osUV",
			"index":0,
			"inputs":{
				"result":{
					"text":"{{ kgxI0.outputs.result.text }}",
					"START":{
						"source":"{{ kgxI0.outputs.result.START }}",
						"ua:type":"mappedArray",
						"items":"{{ kgxI0.outputs.result.START[0] }}"
					},
					"CANCEL":"{{ kgxI0.outputs.result.CANCEL }}"
				}
			},
			"skip":false,
			"subTitle":"Callable",
			"title":"Return data to automation",
			"type":"STOP"
		}
	],
	"ownerUserId":311,
	"settings":{
		"enableNodeLevelLogging":true,
		"enableRunLogging":true,
		"enableVariableLogging":true
	},
	"standard":false,
	"version":5
}